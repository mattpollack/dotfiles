set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'sainnhe/tmux-fzf'

unbind C-b
set -g prefix C-Space
bind C-Space send-prefix
setw -g mode-keys vi
run '~/.tmux/plugins/tpm/tpm'

unbind w
unbind s
bind-key w run-shell -b "$HOME/.config/tmux/plugins/tmux-fzf/scripts/window.sh switch"
bind-key s run-shell -b "$HOME/.config/tmux/plugins/tmux-fzf/scripts/session.sh switch"

set -g base-index 1
setw -g pane-base-index 1
set-option -g renumber-windows on

# tmux-bridge: Neovim integration hooks
# Only low-frequency events are enabled to avoid performance issues
set-hook -g after-split-window "run-shell -b '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh pane:split'"
set-hook -g after-kill-pane "run-shell -b '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh pane:killed'"
set-hook -g pane-exited "run-shell -b '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh pane:exited'"
set-hook -g after-new-window "run-shell -b '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh window:new'"
set-hook -g after-rename-window "run-shell -b '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh window:renamed'"
set-hook -g after-new-session "run-shell -b '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh session:created'"
set-hook -g session-closed "run-shell -b '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh session:closed'"
set-hook -g after-rename-session "run-shell -b '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh session:renamed'"

# High-frequency events
# - after-select-pane
# - after-send-keys
# - client-active
# - client-focus-in/out
# - after-resize-pane
# - client-resized
