set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'sainnhe/tmux-fzf'

unbind C-b
set -g prefix C-Space
bind C-Space send-prefix
setw -g mode-keys vi
run '~/.tmux/plugins/tpm/tpm'

unbind w
unbind s
bind-key w run-shell -b "$HOME/.config/tmux/plugins/tmux-fzf/scripts/window.sh switch"
bind-key s run-shell -b "$HOME/.config/tmux/plugins/tmux-fzf/scripts/session.sh switch"

set -g base-index 1
setw -g pane-base-index 1
set-option -g renumber-windows on

# tmux-bridge: Neovim integration hooks

# Pane events
set-hook -g after-split-window "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh pane:split'"
set-hook -g after-kill-pane "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh pane:killed'"
set-hook -g pane-exited "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh pane:exited'"
set-hook -g after-select-pane "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh pane:selected'"
set-hook -g after-resize-pane "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh pane:resized'"

# Window events
set-hook -g after-new-window "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh window:new'"
set-hook -g after-select-window "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh window:selected'"
set-hook -g after-rename-window "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh window:renamed'"
set-hook -g after-resize-window "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh window:resized'"
set-hook -g window-linked "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh window:linked'"
set-hook -g window-unlinked "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh window:unlinked'"
set-hook -g session-window-changed "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh window:changed'"

# Session events
set-hook -g after-new-session "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh session:created'"
set-hook -g session-created "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh session:created'"
set-hook -g session-closed "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh session:closed'"
set-hook -g after-rename-session "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh session:renamed'"
set-hook -g client-session-changed "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh session:changed'"

# Client events
set-hook -g client-attached "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh client:attached'"
set-hook -g client-detached "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh client:detached'"
set-hook -g client-resized "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh client:resized'"
set-hook -g client-focus-in "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh client:focus-in'"
set-hook -g client-focus-out "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh client:focus-out'"
set-hook -g client-active "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh client:active'"

# Layout events
set-hook -g after-select-layout "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh layout:selected'"

# Alert events
set-hook -g alert-activity "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh alert:activity'"
set-hook -g alert-bell "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh alert:bell'"
set-hook -g alert-silence "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh alert:silence'"

# Copy mode events
set-hook -g after-copy-mode "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh copy-mode:exited'"

# Other useful events
set-hook -g after-send-keys "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh keys:sent'"
set-hook -g command-error "run-shell '$HOME/.config/tmux/scripts/nvim-bridge-hook.sh command:error'"

# bind-key C-r run-shell "$HOME/.config/tmux/scripts/find-and-run-cursor-resume.sh"
# bind-key -n C-a select-pane -t 10
# bind-key -n M-2 select-window -t 2
# bind-key -n M-3 select-window -t 3
# bind-key -n M-4 select-window -t 4
# bind-key -n M-5 select-window -t 5
# bind-key -n M-6 select-window -t 6
# bind-key -n M-7 select-window -t 7
# bind-key -n M-8 select-window -t 8
# bind-key -n M-9 select-window -t 9
